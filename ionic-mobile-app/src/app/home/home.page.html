<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>
      Ionic Mobile App
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="refreshData()">
        <ion-icon name="refresh-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Ionic Mobile App</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Welcome Section -->
  <div class="welcome-section">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Welcome to Ionic + Capacitor</ion-card-title>
        <ion-card-subtitle>Native mobile app with web technologies</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>This app demonstrates Ionic components with Capacitor native functionality.</p>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Native Features Section -->
  <div class="features-section">
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="phone-portrait-outline" slot="start"></ion-icon>
          Native Features
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="6">
              <ion-button expand="block" fill="outline" (click)="takePicture()">
                <ion-icon name="camera-outline" slot="start"></ion-icon>
                Camera
              </ion-button>
            </ion-col>
            <ion-col size="6">
              <ion-button expand="block" fill="outline" (click)="getCurrentLocation()">
                <ion-icon name="location-outline" slot="start"></ion-icon>
                Location
              </ion-button>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="12">
              <ion-button expand="block" fill="solid" (click)="showDeviceInfo()">
                <ion-icon name="information-circle-outline" slot="start"></ion-icon>
                Device Info
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Captured Image Section -->
  <div class="image-section" *ngIf="capturedImage">
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="image-outline" slot="start"></ion-icon>
          Captured Photo
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <img [src]="capturedImage" alt="Captured photo" class="captured-image">
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Device Status Section -->
  <div class="status-section">
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="analytics-outline" slot="start"></ion-icon>
          Device Status
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-icon name="phone-portrait-outline" slot="start"></ion-icon>
            <ion-label>
              <h3>Platform</h3>
              <p>{{ deviceInfo.platform || 'Unknown' }}</p>
            </ion-label>
          </ion-item>
          
          <ion-item>
            <ion-icon name="hardware-chip-outline" slot="start"></ion-icon>
            <ion-label>
              <h3>Model</h3>
              <p>{{ deviceInfo.model || 'Unknown' }}</p>
            </ion-label>
          </ion-item>

          <ion-item>
            <ion-icon name="wifi-outline" slot="start" [color]="networkStatus.connected ? 'success' : 'danger'"></ion-icon>
            <ion-label>
              <h3>Network</h3>
              <p>{{ networkStatus.connected ? 'Connected' : 'Disconnected' }} 
                 <span *ngIf="networkStatus.connectionType">({{ networkStatus.connectionType }})</span>
              </p>
            </ion-label>
          </ion-item>

          <ion-item *ngIf="location.latitude">
            <ion-icon name="location-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3>Location</h3>
              <p>{{ location.latitude.toFixed(4) }}, {{ location.longitude.toFixed(4) }}</p>
              <p><small>Accuracy: {{ location.accuracy }}m</small></p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Action Buttons -->
  <div class="action-section">
    <ion-card>
      <ion-card-content>
        <ion-button expand="block" color="secondary" (click)="refreshData()">
          <ion-icon name="refresh-outline" slot="start"></ion-icon>
          Refresh All Data
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>